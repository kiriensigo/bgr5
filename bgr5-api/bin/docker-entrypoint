#!/bin/bash

set -e

# デバッグモードを有効化
set -x

# システム情報表示
echo "========== システム情報 =========="
echo "環境: $RAILS_ENV"
echo "Rubyバージョン: $(ruby -v)"
echo "現在のディレクトリ: $(pwd)"
echo "ファイル一覧:"
ls -la
echo "=================================="

# 環境変数表示
echo "========== 環境変数 =========="
echo "PORT: ${PORT:-8080}"
echo "DATABASE_URL: ${DATABASE_URL:-未設定}"
echo "=================================="

# ディレクトリ作成
mkdir -p tmp/pids
mkdir -p tmp/cache
mkdir -p log

# アプリケーション起動
echo "アプリケーションを起動します..."

# コマンドを実行
exec "$@" 